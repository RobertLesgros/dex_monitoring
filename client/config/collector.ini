# DEX Monitoring - Configuration générale du collecteur
# Ce fichier configure le comportement général de l'agent de collecte

[General]
# Version du collecteur
CollectorVersion = 1.0.0
# Niveau de log : DEBUG, INFO, WARNING, ERROR
LogLevel = INFO
# Identifiant unique de l'agent (auto-généré si vide)
AgentId =

[Collection]
# Fréquence de base en minutes (utilisé si non spécifié par métrique)
BaseFrequency = 5
# Nombre maximum de métriques collectées en parallèle
MaxParallelCollections = 5
# Timeout par défaut pour une collecte de métrique (secondes)
DefaultTimeout = 30

[Logstash]
# URL du endpoint Logstash
Endpoint = http://localhost:5044
# Utiliser l'authentification
UseAuthentication = false
# Username pour l'auth (si activée)
Username =
# Password pour l'auth (si activée)
Password =
# Timeout de connexion en secondes
ConnectionTimeout = 30
# Timeout de requête en secondes
RequestTimeout = 60
# Utiliser HTTPS
UseHTTPS = false
# Ignorer les erreurs de certificat SSL (dev uniquement)
IgnoreSSLErrors = false

[Buffer]
# Activer le buffer local si Logstash indisponible
EnableBuffer = true
# Chemin du buffer local
BufferPath = C:\ProgramData\DEXCollector\buffer
# Taille maximum du buffer en MB
MaxBufferSizeMB = 100
# Durée de rétention du buffer en heures
BufferRetentionHours = 24
# Intervalle de retry en secondes (backoff exponentiel appliqué)
RetryIntervalSeconds = 60
# Nombre max de tentatives avant abandon
MaxRetries = 5

[Logging]
# Chemin des logs
LogPath = C:\ProgramData\DEXCollector\logs
# Nom du fichier de log
LogFileName = dexcollector.log
# Rétention des logs en jours
LogRetentionDays = 7
# Taille max d'un fichier de log en MB (rotation automatique)
MaxLogFileSizeMB = 10
# Inclure les timestamps dans les logs
IncludeTimestamp = true
# Format du timestamp
TimestampFormat = yyyy-MM-dd HH:mm:ss

[Performance]
# Impact CPU maximum autorisé (%)
MaxCPUUsage = 5
# Délai entre les collectes de métriques (ms) pour limiter l'impact
CollectionDelayMs = 100
# Timeout par métrique (secondes)
MetricTimeoutSeconds = 30
# Activer la collecte en parallèle
EnableParallelCollection = true

[HotReload]
# Activer le rechargement automatique de la configuration
AutoReloadConfig = true
# Intervalle de vérification des changements (minutes)
ConfigCheckIntervalMinutes = 5
# Surveiller le fichier metrics.ini
WatchMetricsConfig = true
# Surveiller le fichier collector.ini
WatchCollectorConfig = true

[Identification]
# Ces valeurs sont auto-détectées si laissées vides
ComputerName =
Domain =
OrganizationalUnit =
SiteName =
# Tag personnalisé pour identifier le type de machine
MachineTag =
# Profil de configuration (server, desktop, laptop, vdi)
# Si vide, détection automatique basée sur le hardware
Profile =

[Advanced]
# Mode debug (logs détaillés, pas d'envoi vers Logstash)
DebugMode = false
# Simuler les collectes sans exécuter réellement
DryRun = false
# Exporter les métriques en JSON local (en plus de l'envoi)
ExportLocalJSON = true
# Chemin d'export JSON local
LocalJSONPath = C:\ProgramData\DEXCollector\export
# Compresser les données avant envoi
CompressData = false
